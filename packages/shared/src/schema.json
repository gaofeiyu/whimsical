{
  "$id": "/schemas/node",
  "title": "Core schema meta-schema",
  "type": "object",
  "definitions": {
    "WDataSourceEnum": {
      "type": "string",
      "enum": ["API", "Store", "LoopState"]
    },
    "IWExpression": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "value": {
          "anyOf": [
            {
              "$ref": "#/definitions/IWExpression"
            },
            {
              "type": "string"
            }
          ]
        },
        "params": {
          "anyOf": [
            {
              "$ref": "#/definitions/IWExpression"
            },
            {
              "type": {}
            }
          ]
        }
      },
      "required": [ "type" ]
    },
    "IWProps": {
      "type": "object",
      "properties": {
        "additionalProperties": {
          "anyOf": [
            {
              "$ref": "#/definitions/IWExpression"
            },
            {
              "type": {}
            }
          ]
        }
      }
    },
    "IWDataSourceExpression": {
      "type": "object",
      "allof": [
        {
          "$ref": "#/definitions/IWExpression"
        }
      ],
      "properties": {
        "type": {
          "$ref": "#/definitions/WDataSourceEnum"
        }
      }

    },
    "WNodeDataType": {
      "type": "object",
      "properties": {
        "loopDataSource": {
          "$ref": "#/definitions/IWDataSourceExpression"
        }
      }
    },
    "IWActionExpression": {
    },
    "EventExpressionType":{
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "action": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/IWActionExpression"
          }
        }
      },
      "required": [ "name" ]
    }

  },
  "properties": {
    "id": {
      "type": "string"
    },
    "name": {
      "type": "string"
    },
    "type": {
      "type": "string"
    },
    "aliasId": {
      "type": "string"
    },
    "children": {
      "type": "array",
      "items": {"$ref": "#"}
    },
    "style": {
      "$ref": "#/definitions/IWProps"
    },
    "props": {
      "$ref": "#/definitions/IWProps"
    },
    "events": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/IWProps"
      }
    },
    "data": {
      "$ref": "#/definitions/WNodeDataType"
    },
    "hidden": {
      "anyOf": [
        {
          "$ref": "#/definitions/IWExpression"
        },
        {
          "type": "boolean"
        }
      ]
    }
  },
  "required": [ "id", "name" ]
}
